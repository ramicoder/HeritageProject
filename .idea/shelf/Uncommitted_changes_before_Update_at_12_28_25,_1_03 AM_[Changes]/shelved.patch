Index: src/main/java/com/ramiaran/heritagesitesystem/HeritageController.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.ramiaran.heritagesitesystem;\n\nimport javafx.fxml.FXML;\nimport javafx.scene.control.Label;\nimport java.util.LinkedList;\nimport java.util.Stack;\n\npublic class HeritageController {\n\n\n    private LinkedList<Visit> allVisits = new LinkedList<>();\n    private Stack<Visit> recentBookings = new Stack<>();\n    private LinkedList<HeritageSite> allSites = new LinkedList<>();\n\n    @FXML\n    private Label welcomeText;\n\n    @FXML\n    protected void onHelloButtonClick() {\n        welcomeText.setText(\"Welcome to JavaFX Application!\");\n    }\n\n    // Initialize the 12 required sites\n    public void initializeSites() {\n        // Historical\n        allSites.add(new HeritageSite(\"Erbil Citadel\", \"Erbil\", \"6000 BC\", \"Historical\", \"Ancient citadel\"));\n        allSites.add(new HeritageSite(\"Qaysari Bazaar\", \"Erbil\", \"13th Century\", \"Historical\", \"Market\"));\n        allSites.add(new HeritageSite(\"Minare Park\", \"Erbil\", \"12th Century\", \"Historical\", \"Tower\"));\n        allSites.add(new HeritageSite(\"Khanzad Castle\", \"Erbil\", \"16th Century\", \"Historical\", \"Fort\"));\n\n        // Museums\n        allSites.add(new HeritageSite(\"Erbil Museum\", \"Erbil\", \"1989\", \"Museum\", \"Civilization\"));\n        allSites.add(new HeritageSite(\"Textile Museum\", \"Erbil\", \"2004\", \"Museum\", \"Carpets\"));\n        allSites.add(new HeritageSite(\"Slemani Museum\", \"Sulaymaniyah\", \"1961\", \"Museum\", \"Artifacts\"));\n        allSites.add(new HeritageSite(\"Gem Museum\", \"Erbil\", \"2010\", \"Museum\", \"Stones\"));\n\n        // Archaeological\n        allSites.add(new HeritageSite(\"Shanidar Cave\", \"Bradost\", \"65000 BC\", \"Archaeological\", \"Neanderthals\"));\n        allSites.add(new HeritageSite(\"Jarmo\", \"Zagros\", \"7000 BC\", \"Archaeological\", \"Farming\"));\n        allSites.add(new HeritageSite(\"Barda Balka\", \"Chemchemal\", \"Paleolithic\", \"Archaeological\", \"Tools\"));\n        allSites.add(new HeritageSite(\"Halamata Cave\", \"Duhok\", \"Assyrian\", \"Archaeological\", \"Reliefs\"));\n    }\n    // Option 2: Schedule a Visit\n    public void scheduleVisit(String category, String siteName, String name, String id, String phone, java.time.LocalDate date) {\n\n        // 1. Check traffic: How many times has this ID visited?\n        // (We use 'long' because the count() method returns a long number)\n        long count = allVisits.stream().filter(v -> v.getVisitorId().equals(id)).count();\n\n        // 2. If limit reached (2 or more), generate fake verification code\n        if (count >= 2) {\n            int code = 100000 + new java.util.Random().nextInt(900000);\n            System.out.println(\"Traffic Control: Limit reached for ID \" + id);\n            System.out.println(\"Verification Code sent to \" + phone + \": \" + code);\n        }\n\n        // 3. Create the Visit object\n        Visit newVisit = new Visit(category, siteName, name, id, phone, date);\n\n        // 4. Add to Memory\n        allVisits.add(newVisit);        // Main Database\n        recentBookings.push(newVisit);  // Stack for \"Recent Bookings\"\n\n        System.out.println(\"Scheduled: \" + name + \" to \" + siteName);\n    }\n}
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/src/main/java/com/ramiaran/heritagesitesystem/HeritageController.java b/src/main/java/com/ramiaran/heritagesitesystem/HeritageController.java
--- a/src/main/java/com/ramiaran/heritagesitesystem/HeritageController.java	(revision 6497a563c3a48bb6ab2cec1c58d7f4cb93b75140)
+++ b/src/main/java/com/ramiaran/heritagesitesystem/HeritageController.java	(date 1766862183321)
@@ -40,18 +40,24 @@
         allSites.add(new HeritageSite("Barda Balka", "Chemchemal", "Paleolithic", "Archaeological", "Tools"));
         allSites.add(new HeritageSite("Halamata Cave", "Duhok", "Assyrian", "Archaeological", "Reliefs"));
     }
-    // Option 2: Schedule a Visit
-    public void scheduleVisit(String category, String siteName, String name, String id, String phone, java.time.LocalDate date) {
+    // Option 2: Schedule a Visit (Refactored: Loops + Return String)
+    public String scheduleVisit(String category, String siteName, String name, String id, String phone, java.time.LocalDate date) {
+        StringBuilder resultMessage = new StringBuilder();
 
-        // 1. Check traffic: How many times has this ID visited?
-        // (We use 'long' because the count() method returns a long number)
-        long count = allVisits.stream().filter(v -> v.getVisitorId().equals(id)).count();
+        // 1. Check traffic: Count visits for this ID using a standard Loop (DSA O(N))
+        int count = 0;
+        for (Visit v : allVisits) {
+            // Using equalsIgnoreCase prevents bugs if they type "ID123" vs "id123"
+            if (v.getVisitorId().equalsIgnoreCase(id)) {
+                count++;
+            }
+        }
 
         // 2. If limit reached (2 or more), generate fake verification code
         if (count >= 2) {
             int code = 100000 + new java.util.Random().nextInt(900000);
-            System.out.println("Traffic Control: Limit reached for ID " + id);
-            System.out.println("Verification Code sent to " + phone + ": " + code);
+            resultMessage.append("Traffic Warning: Frequent Visitor Limit (").append(count).append(")\n");
+            resultMessage.append("Verification Code sent to ").append(phone).append(": ").append(code).append("\n");
         }
 
         // 3. Create the Visit object
@@ -61,6 +67,148 @@
         allVisits.add(newVisit);        // Main Database
         recentBookings.push(newVisit);  // Stack for "Recent Bookings"
 
-        System.out.println("Scheduled: " + name + " to " + siteName);
+        // 5. Final Success Message
+        resultMessage.append("Success: Scheduled ").append(name).append(" to ").append(siteName);
+
+        // We return the String so the UI can display it in a Label or Alert later
+        return resultMessage.toString();
+    }
+
+
+
+
+
+    // Option 4: View Visits (Return String for UI)
+    public String viewVisits(String category, boolean ascending) {
+        StringBuilder sb = new StringBuilder(); // Builds the text for the UI
+        sb.append("--- Visit Report: ").append(category).append(" ---\n");
+
+        // 1. Filter: specific category only
+        // We use a temporary list so we don't mess up the main 'allVisits' list
+        LinkedList<Visit> filteredList = new LinkedList<>();
+        for (Visit v : allVisits) {
+            // DSA: Linear Search O(N)
+            if (v.getCategory().equalsIgnoreCase(category)) {
+                filteredList.add(v);
+            }
+        }
+
+        // 2. Sort: Explicit Comparator
+        filteredList.sort((v1, v2) -> {
+            if (ascending) return v1.getVisitDate().compareTo(v2.getVisitDate());
+            else return v2.getVisitDate().compareTo(v1.getVisitDate());
+        });
+
+        // 3. Build String
+        if (filteredList.isEmpty()) {
+            sb.append("No visits found for this category.");
+        } else {
+            for (Visit v : filteredList) {
+                sb.append(v.getSiteName()).append(" | ")
+                        .append(v.getVisitorName()).append(" | ")
+                        .append(v.getVisitDate()).append("\n");
+            }
+        }
+
+        return sb.toString(); // Send this text to the UI
+    }
+
+    // Option 5: Display Totals (Return String for UI)
+    public String displayTotals() {
+        StringBuilder sb = new StringBuilder();
+        sb.append("--- System Totals ---\n");
+
+        // 1. Get unique categories
+        LinkedList<String> categories = new LinkedList<>();
+        for (HeritageSite site : allSites) {
+            boolean exists = false;
+            for(String c : categories) {
+                if(c.equalsIgnoreCase(site.getCategory())) exists = true;
+            }
+            if (!exists) categories.add(site.getCategory());
+        }
+
+        // 2. Loop through Categories
+        for (String cat : categories) {
+            // Count total visits for this category
+            int catCount = 0;
+            for (Visit v : allVisits) {
+                if (v.getCategory().equalsIgnoreCase(cat)) {
+                    catCount++;
+                }
+            }
+            sb.append(cat).append(": ").append(catCount).append(" total visits\n");
+
+            // 3. Loop through Sites in this Category
+            for (HeritageSite site : allSites) {
+                if (site.getCategory().equalsIgnoreCase(cat)) {
+                    int siteCount = 0;
+                    for (Visit v : allVisits) {
+                        if (v.getSiteName().equalsIgnoreCase(site.getName())) {
+                            siteCount++;
+                        }
+                    }
+                    sb.append("   - ").append(site.getName()).append(": ").append(siteCount).append("\n");
+                }
+            }
+        }
+        return sb.toString();
+    }
+
+
+
+
+
+
+
+    // Option 8: Summary Report (Return String for UI)
+    public String generateSummaryReport() {
+        StringBuilder sb = new StringBuilder();
+        sb.append("--- Intelligence Report ---\n");
+
+        // --- Find Top Category ---
+        String topCategory = "None";
+        long maxCatCount = -1;
+
+        // Get categories manually to avoid streams
+        LinkedList<String> categories = new LinkedList<>();
+        for (HeritageSite s : allSites) {
+            // Simple check to avoid duplicates
+            boolean present = false;
+            for(String c : categories) if(c.equalsIgnoreCase(s.getCategory())) present = true;
+            if(!present) categories.add(s.getCategory());
+        }
+
+        for (String cat : categories) {
+            long count = 0;
+            for (Visit v : allVisits) {
+                if (v.getCategory().equalsIgnoreCase(cat)) count++;
+            }
+
+            if (count > maxCatCount) {
+                maxCatCount = count;
+                topCategory = cat;
+            }
+        }
+        sb.append("Top Category: ").append(topCategory).append(" (").append(maxCatCount).append(" visits)\n");
+
+        // --- Find Top Site ---
+        String topSite = "None";
+        long maxSiteCount = -1;
+
+        for (HeritageSite site : allSites) {
+            long count = 0;
+            for (Visit v : allVisits) {
+                if (v.getSiteName().equalsIgnoreCase(site.getName())) count++;
+            }
+
+            if (count > maxSiteCount) {
+                maxSiteCount = count;
+                topSite = site.getName();
+            }
+        }
+        sb.append("Top Site:     ").append(topSite).append(" (").append(maxSiteCount).append(" visits)\n");
+
+        return sb.toString();
     }
 }
\ No newline at end of file
Index: .idea/workspace.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<project version=\"4\">\n  <component name=\"AutoImportSettings\">\n    <option name=\"autoReloadType\" value=\"SELECTIVE\" />\n  </component>\n  <component name=\"ChangeListManager\">\n    <list default=\"true\" id=\"34cabb51-2552-485f-ab94-eb3b3e64f8d7\" name=\"Changes\" comment=\"\" />\n    <option name=\"SHOW_DIALOG\" value=\"false\" />\n    <option name=\"HIGHLIGHT_CONFLICTS\" value=\"true\" />\n    <option name=\"HIGHLIGHT_NON_ACTIVE_CHANGELIST\" value=\"false\" />\n    <option name=\"LAST_RESOLUTION\" value=\"IGNORE\" />\n  </component>\n  <component name=\"FileTemplateManagerImpl\">\n    <option name=\"RECENT_TEMPLATES\">\n      <list>\n        <option value=\"Class\" />\n      </list>\n    </option>\n  </component>\n  <component name=\"Git.Settings\">\n    <option name=\"RECENT_GIT_ROOT_PATH\" value=\"$PROJECT_DIR$\" />\n  </component>\n  <component name=\"GitHubPullRequestSearchHistory\">{\n  &quot;lastFilter&quot;: {\n    &quot;state&quot;: &quot;OPEN&quot;,\n    &quot;assignee&quot;: &quot;AranRKh&quot;\n  }\n}</component>\n  <component name=\"GithubPullRequestsUISettings\">{\n  &quot;selectedUrlAndAccountId&quot;: {\n    &quot;url&quot;: &quot;https://github.com/ramicoder/HeritageProject.git&quot;,\n    &quot;accountId&quot;: &quot;208d1637-bdad-4562-8f28-ed34480fd157&quot;\n  }\n}</component>\n  <component name=\"MavenImportPreferences\">\n    <option name=\"generalSettings\">\n      <MavenGeneralSettings>\n        <option name=\"mavenHomeTypeForPersistence\" value=\"WRAPPER\" />\n      </MavenGeneralSettings>\n    </option>\n  </component>\n  <component name=\"ProjectColorInfo\">{\n  &quot;associatedIndex&quot;: 1\n}</component>\n  <component name=\"ProjectId\" id=\"37FYfubmAuw5IKuKiAcHRlEh9jq\" />\n  <component name=\"ProjectViewState\">\n    <option name=\"hideEmptyMiddlePackages\" value=\"true\" />\n    <option name=\"showLibraryContents\" value=\"true\" />\n  </component>\n  <component name=\"PropertiesComponent\">{\n  &quot;keyToString&quot;: {\n    &quot;Application.HelloApplication.executor&quot;: &quot;Run&quot;,\n    &quot;Application.HeritageApp.executor&quot;: &quot;Run&quot;,\n    &quot;ModuleVcsDetector.initialDetectionPerformed&quot;: &quot;true&quot;,\n    &quot;RunOnceActivity.ShowReadmeOnStart&quot;: &quot;true&quot;,\n    &quot;RunOnceActivity.TerminalTabsStorage.copyFrom.TerminalArrangementManager&quot;: &quot;true&quot;,\n    &quot;RunOnceActivity.TerminalTabsStorage.copyFrom.TerminalArrangementManager.252&quot;: &quot;true&quot;,\n    &quot;RunOnceActivity.git.unshallow&quot;: &quot;true&quot;,\n    &quot;RunOnceActivity.typescript.service.memoryLimit.init&quot;: &quot;true&quot;,\n    &quot;git-widget-placeholder&quot;: &quot;main&quot;,\n    &quot;kotlin-language-version-configured&quot;: &quot;true&quot;,\n    &quot;node.js.detected.package.eslint&quot;: &quot;true&quot;,\n    &quot;node.js.detected.package.tslint&quot;: &quot;true&quot;,\n    &quot;node.js.selected.package.eslint&quot;: &quot;(autodetect)&quot;,\n    &quot;node.js.selected.package.tslint&quot;: &quot;(autodetect)&quot;,\n    &quot;nodejs_package_manager_path&quot;: &quot;npm&quot;,\n    &quot;project.structure.last.edited&quot;: &quot;Project&quot;,\n    &quot;project.structure.proportion&quot;: &quot;0.0&quot;,\n    &quot;project.structure.side.proportion&quot;: &quot;0.0&quot;,\n    &quot;settings.editor.selected.configurable&quot;: &quot;terminal&quot;,\n    &quot;vue.rearranger.settings.migration&quot;: &quot;true&quot;\n  }\n}</component>\n  <component name=\"RunManager\">\n    <configuration name=\"HeritageApp\" type=\"Application\" factoryName=\"Application\" temporary=\"true\" nameIsGenerated=\"true\">\n      <option name=\"MAIN_CLASS_NAME\" value=\"com.ramiaran.heritagesitesystem.HeritageApp\" />\n      <module name=\"heritage-site-system\" />\n      <extension name=\"coverage\">\n        <pattern>\n          <option name=\"PATTERN\" value=\"com.ramiaran.heritagesitesystem.*\" />\n          <option name=\"ENABLED\" value=\"true\" />\n        </pattern>\n      </extension>\n      <method v=\"2\">\n        <option name=\"Make\" enabled=\"true\" />\n      </method>\n    </configuration>\n    <configuration default=\"true\" type=\"JetRunConfigurationType\">\n      <module name=\"HeritageProject\" />\n      <method v=\"2\">\n        <option name=\"Make\" enabled=\"true\" />\n      </method>\n    </configuration>\n    <configuration default=\"true\" type=\"KotlinStandaloneScriptRunConfigurationType\">\n      <module name=\"HeritageProject\" />\n      <option name=\"filePath\" />\n      <method v=\"2\" />\n    </configuration>\n    <recent_temporary>\n      <list>\n        <item itemvalue=\"Application.HeritageApp\" />\n      </list>\n    </recent_temporary>\n  </component>\n  <component name=\"SharedIndexes\">\n    <attachedChunks>\n      <set>\n        <option value=\"bundled-jdk-30f59d01ecdd-26cb7f24e5b0-intellij.indexing.shared.core-IU-253.29346.138\" />\n        <option value=\"bundled-js-predefined-d6986cc7102b-9b0f141eb926-JavaScript-IU-253.29346.138\" />\n      </set>\n    </attachedChunks>\n  </component>\n  <component name=\"TaskManager\">\n    <task active=\"true\" id=\"Default\" summary=\"Default task\">\n      <changelist id=\"34cabb51-2552-485f-ab94-eb3b3e64f8d7\" name=\"Changes\" comment=\"\" />\n      <created>1766500393512</created>\n      <option name=\"number\" value=\"Default\" />\n      <option name=\"presentableId\" value=\"Default\" />\n      <updated>1766500393512</updated>\n      <workItem from=\"1766500394601\" duration=\"7652000\" />\n      <workItem from=\"1766672840388\" duration=\"4608000\" />\n    </task>\n    <servers />\n  </component>\n  <component name=\"TypeScriptGeneratedFilesManager\">\n    <option name=\"version\" value=\"3\" />\n  </component>\n  <component name=\"Vcs.Log.Tabs.Properties\">\n    <option name=\"TAB_STATES\">\n      <map>\n        <entry key=\"MAIN\">\n          <value>\n            <State />\n          </value>\n        </entry>\n      </map>\n    </option>\n  </component>\n  <component name=\"XSLT-Support.FileAssociations.UIState\">\n    <expand />\n    <select />\n  </component>\n</project>
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/.idea/workspace.xml b/.idea/workspace.xml
--- a/.idea/workspace.xml	(revision 6497a563c3a48bb6ab2cec1c58d7f4cb93b75140)
+++ b/.idea/workspace.xml	(date 1766866580864)
@@ -4,7 +4,10 @@
     <option name="autoReloadType" value="SELECTIVE" />
   </component>
   <component name="ChangeListManager">
-    <list default="true" id="34cabb51-2552-485f-ab94-eb3b3e64f8d7" name="Changes" comment="" />
+    <list default="true" id="34cabb51-2552-485f-ab94-eb3b3e64f8d7" name="Changes" comment="">
+      <change beforePath="$PROJECT_DIR$/.idea/workspace.xml" beforeDir="false" afterPath="$PROJECT_DIR$/.idea/workspace.xml" afterDir="false" />
+      <change beforePath="$PROJECT_DIR$/src/main/java/com/ramiaran/heritagesitesystem/HeritageController.java" beforeDir="false" afterPath="$PROJECT_DIR$/src/main/java/com/ramiaran/heritagesitesystem/HeritageController.java" afterDir="false" />
+    </list>
     <option name="SHOW_DIALOG" value="false" />
     <option name="HIGHLIGHT_CONFLICTS" value="true" />
     <option name="HIGHLIGHT_NON_ACTIVE_CHANGELIST" value="false" />
@@ -135,6 +138,28 @@
         </entry>
       </map>
     </option>
+  </component>
+  <component name="XDebuggerManager">
+    <breakpoint-manager>
+      <breakpoints>
+        <line-breakpoint enabled="true" type="java-line">
+          <url>file://$PROJECT_DIR$/src/main/java/com/ramiaran/heritagesitesystem/HeritageController.java</url>
+          <line>41</line>
+          <option name="timeStamp" value="1" />
+        </line-breakpoint>
+        <line-breakpoint enabled="true" type="java-line">
+          <url>file://$PROJECT_DIR$/src/main/java/com/ramiaran/heritagesitesystem/HeritageController.java</url>
+          <line>199</line>
+          <option name="timeStamp" value="2" />
+        </line-breakpoint>
+        <line-breakpoint enabled="true" type="java-field">
+          <url>file://$PROJECT_DIR$/src/main/java/com/ramiaran/heritagesitesystem/HeritageController.java</url>
+          <line>15</line>
+          <properties field="welcomeText" class="com.ramiaran.heritagesitesystem.HeritageController" />
+          <option name="timeStamp" value="3" />
+        </line-breakpoint>
+      </breakpoints>
+    </breakpoint-manager>
   </component>
   <component name="XSLT-Support.FileAssociations.UIState">
     <expand />
